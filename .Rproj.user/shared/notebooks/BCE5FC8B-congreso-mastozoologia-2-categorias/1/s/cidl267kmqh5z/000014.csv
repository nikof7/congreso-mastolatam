"0","library(dplyr)"
"0","library(purrr)"
"0",""
"0","# Lista de columnas para calcular overlapEst"
"0","density_columns <- c(""density_tr_btau_sys"", ""density_tr_cfam_sys"", ""density_n_tech_sys"")"
"0",""
"0","# Crear un dataframe para almacenar los resultados"
"0","results <- data.frame(sp = character(), "
"0","                       dhat_0 = double(), "
"0","                       dhat_1 = double(), "
"0","                       dhat_2 = double(), "
"0","                       stringsAsFactors = FALSE)"
"0",""
"0","# Iterar sobre cada especie y cada columna"
"0","generalized_density_data %>%"
"0","  distinct(sp) %>%"
"0","  pull(sp) %>%"
"0","  walk(function(sp_name) {"
"0","    # Iterar sobre cada columna de densidad"
"0","    map(density_columns, function(col) {"
"0","      # Filtrar los datos para la especie y la columna actual"
"0","      data <- generalized_density_data %>%"
"0","        filter(sp == sp_name) %>%"
"0","        ungroup() %>%"
"0","        select(all_of(col)) %>%"
"0","        pull()"
"0",""
"0","      # Obtener las categor√≠as 0 y 1"
"0","      cat0 <- data[[1]]$density_data %>% filter(category == ""0"")"
"0","      cat1 <- data[[1]]$density_data %>% filter(category == ""1"")"
"0",""
"0","      # Calcular overlapEst"
"0","      overlap_value <- overlapEst(cat0$density, cat1$density)"
"0",""
"0","      # Almacenar el resultado"
"0","      results <<- rbind(results, data.frame(sp = sp_name, "
"0","                                             column = col, "
"0","                                             dhat_0 = overlap_value[1], "
"0","                                             dhat_1 = overlap_value[2], "
"0","                                             dhat_2 = overlap_value[3]))"
"0","    })"
"0","  })"
"0",""
"0","# Mostrar los resultados"
"0","print(results)"
